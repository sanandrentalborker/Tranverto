<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tranverto - PDF ‡§î‡§∞ ‡§´‡§º‡§æ‡§á‡§≤ ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/style.css"> <!-- NOTE: Flask Static Folder path -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ‡§ï‡§∏‡•ç‡§ü‡§Æ CSS ‡§Ø‡§π‡§æ‡§Å ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à, ‡§≤‡•á‡§ï‡§ø‡§® ‡§á‡§∏‡•á style.css ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc; /* Slightly lighter background */
        }
        /* Enhanced Card Design */
        .converter-card {
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            border: 1px solid #e0e7ff; /* Light indigo border */
        }
        .converter-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 30px rgba(79, 70, 229, 0.15); /* Indigo glow effect */
        }
        .upload-area {
            border: 2px dashed #a0aec0;
            transition: border-color 0.3s;
        }
        .upload-area:hover {
            border-color: #4c51bf;
        }
        .loader {
            border-top-color: #4c51bf;
            -webkit-animation: spin 1s ease-in-out infinite;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Modal background class */
        .modal-open {
            overflow: hidden;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4">

    <!-- Header & Professional Logo Section -->
    <header class="w-full max-w-7xl px-4 py-4 md:py-8 flex flex-col sm:flex-row justify-center sm:justify-between items-center bg-white rounded-xl shadow-lg mb-8">
        <div class="flex items-center space-x-3">
            <!-- Professional Logo Placeholder (SVG Document/Convert Icon) -->
            <!-- ‡§Ø‡§¶‡§ø ‡§Ü‡§™‡§ï‡•Ä logo.png ‡§´‡§º‡§æ‡§á‡§≤ 'static' ‡§´‡§º‡•ã‡§≤‡•ç‡§°‡§∞ ‡§Æ‡•á‡§Ç ‡§π‡•à, ‡§§‡•ã ‡§á‡§∏‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç -->
            <!-- <img src="{{ url_for('static', filename='logo.png') }}" alt="Tranverto Logo" class="w-10 h-10"> -->
            <svg class="w-10 h-10 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 tracking-tight">Tran<span class="text-indigo-600">verto</span></h1>
        </div>
        <p class="text-lg text-gray-500 mt-2 sm:mt-0 sm:ml-8 sm:border-l sm:border-gray-300 sm:pl-8 font-medium">100% ‡§Æ‡•Å‡§´‡§º‡•ç‡§§ $\text{‡§î‡§∞}$ $\text{‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§}$ $\text{‡§´‡§º‡§æ‡§á‡§≤}$ $\text{‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ú‡§º‡§®}$</p>
    </header>

    <!-- Main Content Area -->
    <main class="w-full max-w-7xl flex-grow px-4">
        <section class="text-center mb-10">
            <h2 class="text-3xl md:text-4xl font-extrabold text-gray-800 mb-2">‡§Ü‡§™‡§ï‡§æ $\text{‡§ë‡§®‡§≤‡§æ‡§á‡§®}$ $\text{‡§´‡§º‡§æ‡§á‡§≤}$ $\text{‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ú‡§º‡§®}$ $\text{‡§∏‡§Æ‡§æ‡§ß‡§æ‡§®}$</h2>
            <p class="text-xl text-gray-600">‡§§‡•Å‡§∞‡§Ç‡§§ $\text{‡§∂‡•Å‡§∞‡•Ç}$ $\text{‡§ï‡§∞‡•á‡§Ç}$‡•§ $\text{‡§ï‡•ã‡§à}$ $\text{‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§®}$ $\text{‡§®‡§π‡•Ä‡§Ç}$, $\text{‡§ï‡•ã‡§à}$ $\text{‡§µ‡•â‡§ü‡§∞‡§Æ‡§æ‡§∞‡•ç‡§ï}$ $\text{‡§®‡§π‡•Ä‡§Ç}$‡•§</p>
        </section>

        <h2 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-indigo-500 pb-2 max-w-5xl mx-auto">‡§π‡§Æ‡§æ‡§∞‡•á ‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ú‡§º‡§® ‡§ü‡•Ç‡§≤‡•ç‡§∏</h2>
        
        <!-- Tools Grid -->
        <div id="tools-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto">
            
            <!-- Tool 1: PDF to Word -->
            <div id="tool-pdf-to-word" data-route="/pdf-to-word" data-input-ext=".pdf" data-output-name="Word" class="converter-card bg-white p-6 rounded-xl shadow-md flex flex-col items-start hover:shadow-xl">
                <span class="text-4xl mb-3 text-indigo-500">üìÑ</span>
                <h3 class="text-lg font-extrabold text-gray-800 mb-1">PDF ‡§∏‡•á Word</h3>
                <p class="text-xs text-gray-500 mb-4">PDF ‡§ï‡•ã ‡§∏‡§Ç‡§™‡§æ‡§¶‡§® ‡§Ø‡•ã‡§ó‡•ç‡§Ø DOCX ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§</p>
                <button onclick="openModal('tool-pdf-to-word')" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01]">
                    ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                </button>
            </div>
            
            <!-- Tool 2: Word to PDF -->
            <div id="tool-word-to-pdf" data-route="/word-to-pdf" data-input-ext=".docx, .doc" data-output-name="PDF" class="converter-card bg-white p-6 rounded-xl shadow-md flex flex-col items-start hover:shadow-xl">
                <span class="text-4xl mb-3 text-red-500">üìÑ</span>
                <h3 class="text-lg font-extrabold text-gray-800 mb-1">Word ‡§∏‡•á PDF</h3>
                <p class="text-xs text-gray-500 mb-4">DOCX ‡§Ø‡§æ DOC ‡§´‡§º‡§æ‡§á‡§≤‡•ã‡§Ç ‡§ï‡•ã PDF ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§</p>
                <button onclick="openModal('tool-word-to-pdf')" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01]">
                    ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                </button>
            </div>

            <!-- Tool 3: PDF to JPG -->
            <div id="tool-pdf-to-jpg" data-route="/pdf-to-jpg" data-input-ext=".pdf" data-output-name="JPG" class="converter-card bg-white p-6 rounded-xl shadow-md flex flex-col items-start hover:shadow-xl">
                <span class="text-4xl mb-3 text-yellow-600">üñºÔ∏è</span>
                <h3 class="text-lg font-extrabold text-gray-800 mb-1">PDF ‡§∏‡•á JPG</h3>
                <p class="text-xs text-gray-500 mb-4">PDF ‡§™‡•á‡§ú‡•ã‡§Ç ‡§ï‡•ã ‡§â‡§ö‡•ç‡§ö-‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§µ‡§æ‡§≤‡•Ä JPG ‡§á‡§Æ‡•á‡§ú ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§</p>
                <button onclick="openModal('tool-pdf-to-jpg')" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01]">
                    ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                </button>
            </div>

            <!-- Tool 4: JPG to PDF -->
            <div id="tool-jpg-to-pdf" data-route="/jpg-to-pdf" data-input-ext=".jpg, .jpeg, .png, .gif" data-output-name="PDF" class="converter-card bg-white p-6 rounded-xl shadow-md flex flex-col items-start hover:shadow-xl">
                <span class="text-4xl mb-3 text-green-600">üñºÔ∏è</span>
                <h3 class="text-lg font-extrabold text-gray-800 mb-1">JPG/PNG ‡§∏‡•á PDF</h3>
                <p class="text-xs text-gray-500 mb-4">JPG, PNG ‡§î‡§∞ GIF ‡§á‡§Æ‡•á‡§ú‡•á‡§ú ‡§ï‡•ã ‡§è‡§ï PDF ‡§Æ‡•á‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡§è‡§Ç‡•§</p>
                <button onclick="openModal('tool-jpg-to-pdf')" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01]">
                    ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                </button>
            </div>
            
            <!-- Tool 5: PDF to PPT -->
            <div id="tool-pdf-to-ppt" data-route="/pdf-to-ppt" data-input-ext=".pdf" data-output-name="PPT" class="converter-card bg-white p-6 rounded-xl shadow-md flex flex-col items-start hover:shadow-xl">
                <span class="text-4xl mb-3 text-orange-500">üìä</span>
                <h3 class="text-lg font-extrabold text-gray-800 mb-1">PDF ‡§∏‡•á PPT</h3>
                <p class="text-xs text-gray-500 mb-4">PDF ‡§ï‡•ã ‡§∏‡§Ç‡§™‡§æ‡§¶‡§® ‡§Ø‡•ã‡§ó‡•ç‡§Ø PowerPoint ‡§™‡•ç‡§∞‡•á‡§ú‡•á‡§Ç‡§ü‡•á‡§∂‡§® (PPTX) ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§</p>
                <button onclick="openModal('tool-pdf-to-ppt')" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01]">
                    ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                </button>
            </div>

            <!-- Tool 6: PDF to Excel -->
            <div id="tool-pdf-to-excel" data-route="/pdf-to-excel" data-input-ext=".pdf" data-output-name="Excel" class="converter-card bg-white p-6 rounded-xl shadow-md flex flex-col items-start hover:shadow-xl">
                <span class="text-4xl mb-3 text-emerald-500">üìà</span>
                <h3 class="text-lg font-extrabold text-gray-800 mb-1">PDF ‡§∏‡•á Excel</h3>
                <p class="text-xs text-gray-500 mb-4">PDF ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§ï‡•ã XLSX ‡§∏‡•ç‡§™‡•ç‡§∞‡•á‡§°‡§∂‡•Ä‡§ü ‡§Æ‡•á‡§Ç ‡§è‡§ï‡•ç‡§∏‡§ü‡•ç‡§∞‡•à‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§</p>
                <button onclick="openModal('tool-pdf-to-excel')" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01]">
                    ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                </button>
            </div>
            
            <!-- Tool 7: Excel to PDF -->
            <div id="tool-excel-to-pdf" data-route="/excel-to-pdf" data-input-ext=".xlsx, .xls" data-output-name="PDF" class="converter-card bg-white p-6 rounded-xl shadow-md flex flex-col items-start hover:shadow-xl">
                <span class="text-4xl mb-3 text-red-700">üìà</span>
                <h3 class="text-lg font-extrabold text-gray-800 mb-1">Excel ‡§∏‡•á PDF</h3>
                <p class="text-xs text-gray-500 mb-4">Excel ‡§∏‡•ç‡§™‡•ç‡§∞‡•á‡§°‡§∂‡•Ä‡§ü ‡§ï‡•ã PDF ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§</p>
                <button onclick="openModal('tool-excel-to-pdf')" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01]">
                    ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                </button>
            </div>

            <!-- Tool 8: PDF to Image -->
            <div id="tool-pdf-to-image" data-route="/pdf-to-image" data-input-ext=".pdf" data-output-name="PNG" class="converter-card bg-white p-6 rounded-xl shadow-md flex flex-col items-start hover:shadow-xl">
                <span class="text-4xl mb-3 text-sky-500">üì∏</span>
                <h3 class="text-lg font-extrabold text-gray-800 mb-1">PDF ‡§∏‡•á PNG</h3>
                <p class="text-xs text-gray-500 mb-4">PDF ‡§™‡•á‡§ú‡•ã‡§Ç ‡§ï‡•ã ‡§â‡§ö‡•ç‡§ö-‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§µ‡§æ‡§≤‡•Ä PNG ‡§á‡§Æ‡•á‡§ú ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§</p>
                <button onclick="openModal('tool-pdf-to-image')" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01]">
                    ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                </button>
            </div>
            
            <!-- Tool 9: Image to PDF -->
            <div id="tool-image-to-pdf" data-route="/image-to-pdf" data-input-ext=".jpg, .jpeg, .png, .gif" data-output-name="PDF" class="converter-card bg-white p-6 rounded-xl shadow-md flex flex-col items-start hover:shadow-xl">
                <span class="text-4xl mb-3 text-purple-500">üì∏</span>
                <h3 class="text-lg font-extrabold text-gray-800 mb-1">Image ‡§∏‡•á PDF</h3>
                <p class="text-xs text-gray-500 mb-4">JPG, PNG, GIF ‡§ï‡•ã ‡§è‡§ï PDF ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§</p>
                <button onclick="openModal('tool-image-to-pdf')" class="mt-auto w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-md transform hover:scale-[1.01]">
                    ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü‡§∞ ‡§ñ‡•ã‡§≤‡•á‡§Ç
                </button>
            </div>
            
            <!-- Tool 10: PDF Translate (Planned Feature) -->
            <div id="tool-pdf-translate" data-route="/pdf-translate" data-input-ext=".pdf" data-output-name="Translated PDF" class="converter-card bg-gray-100 p-6 rounded-xl shadow-inner flex flex-col items-start opacity-70 cursor-not-allowed border-gray-200">
                <span class="text-4xl mb-3 text-gray-500">üìÑ‚û°Ô∏èüó£Ô∏è</span>
                <h3 class="text-lg font-extrabold text-gray-600 mb-1">PDF ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶</h3>
                <p class="text-xs text-gray-500 mb-4">‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç PDF ‡§ï‡§æ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶ ‡§ï‡§∞‡•á‡§Ç‡•§ (‡§ú‡§≤‡•ç‡§¶ ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à)</p>
                <button disabled class="mt-auto w-full bg-gray-400 text-white font-semibold py-2 px-4 rounded-lg shadow-md">
                    ‡§ú‡§≤‡•ç‡§¶ ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à
                </button>
            </div>
            
        </div>
    </main>

    <!-- Modal for Conversion -->
    <div id="conversion-modal" class="fixed inset-0 bg-gray-900 bg-opacity-70 backdrop-blur-sm hidden items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 transform transition-all duration-300 scale-100">
            <h3 id="modal-title" class="text-2xl font-extrabold text-gray-800 mb-4 border-b pb-2">‡§´‡§º‡§æ‡§á‡§≤ ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</h3>
            
            <form id="upload-form" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="conversion_route" id="conversion-route">

                <!-- File Drop/Select Area -->
                <label for="file-upload" class="upload-area block w-full p-12 mb-6 text-center rounded-lg bg-gray-50 hover:bg-gray-100 transition duration-300">
                    <svg class="w-10 h-10 mx-auto text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v8"></path></svg>
                    <p class="mt-2 text-sm text-gray-600 font-semibold">‡§´‡§º‡§æ‡§á‡§≤ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§°‡•ç‡§∞‡•à‡§ó ‡§ï‡§∞‡•á‡§Ç</p>
                    <p id="allowed-formats" class="text-xs text-gray-500 mt-1"></p>
                </label>
                <input type="file" name="file" id="file-upload" class="hidden" required>
                
                <!-- File Preview/Status -->
                <div id="file-status" class="mb-4 text-center hidden p-2 bg-indigo-50 rounded-lg border border-indigo-200">
                    <p class="text-base text-gray-700 font-medium">‡§ö‡§Ø‡§®‡§ø‡§§ $\text{‡§´‡§º‡§æ‡§á‡§≤}$: <span id="file-name" class="font-extrabold text-indigo-700"></span></p>
                </div>
                
                <!-- Progress & Loading State -->
                <div id="progress-area" class="hidden text-center p-4 bg-yellow-50 rounded-lg border border-yellow-300">
                    <div class="w-10 h-10 border-4 border-gray-200 border-solid rounded-full loader mx-auto mb-3"></div>
                    <p class="text-yellow-800 font-semibold">‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à... $\text{‡§ï‡•É‡§™‡§Ø‡§æ}$ $\text{‡§á‡§Ç‡§§‡§ú‡§æ‡§∞}$ $\text{‡§ï‡§∞‡•á‡§Ç}$‡•§</p>
                </div>

                <!-- Error/Success Message -->
                <div id="message-box" class="mt-4 p-3 rounded-lg text-sm hidden font-medium" role="alert"></div>

                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" onclick="closeModal()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-300">
                        ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
                    </button>
                    <button type="submit" id="convert-button" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 shadow-lg">
                        ‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="w-full max-w-7xl text-center py-6 mt-12 border-t border-gray-200 px-4">
        <p class="text-sm text-gray-500">¬© 2025 Tranverto | $\text{‡§≠‡§æ‡§∞‡§§}$ $\text{‡§Æ‡•á‡§Ç}$ $\text{‡§ó‡§∞‡•ç‡§µ}$ $\text{‡§∏‡•á}$ $\text{‡§®‡§ø‡§∞‡•ç‡§Æ‡§ø‡§§}$ ($\text{Proudly}$ $\text{Made}$ $\text{in}$ $\text{India}$)‡•§</p>
    </footer>

    <script>
        const modal = document.getElementById('conversion-modal');
        const uploadForm = document.getElementById('upload-form');
        const modalTitle = document.getElementById('modal-title');
        const allowedFormats = document.getElementById('allowed-formats');
        const fileUpload = document.getElementById('file-upload');
        const fileNameDisplay = document.getElementById('file-name');
        const fileStatus = document.getElementById('file-status');
        const progressArea = document.getElementById('progress-area');
        const messageBox = document.getElementById('message-box');
        const convertButton = document.getElementById('convert-button');
        
        let currentToolRoute = '';

        // Function to open the modal
        function openModal(toolId) {
            const toolElement = document.getElementById(toolId);
            if (!toolElement) return;

            // Clear previous states
            fileUpload.value = '';
            fileStatus.classList.add('hidden');
            progressArea.classList.add('hidden');
            messageBox.classList.add('hidden');
            convertButton.disabled = false;
            convertButton.textContent = '‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç';
            convertButton.classList.remove('bg-gray-400', 'cursor-not-allowed', 'shadow-none');
            convertButton.classList.add('bg-indigo-600', 'hover:bg-indigo-700', 'shadow-lg');
            
            // Get tool data
            currentToolRoute = toolElement.getAttribute('data-route');
            const inputExt = toolElement.getAttribute('data-input-ext');
            const outputName = toolElement.getAttribute('data-output-name');
            const toolTitle = toolElement.querySelector('h3').textContent; // Get the H3 text

            // Set modal content
            modalTitle.textContent = toolTitle;
            allowedFormats.textContent = `‡§Ö‡§®‡•Å‡§Æ‡§§ ‡§´‡§º‡•â‡§∞‡•ç‡§Æ‡•á‡§ü: ${inputExt.toUpperCase().split(',').join(', ')}`;
            fileUpload.setAttribute('accept', inputExt);
            document.getElementById('conversion-route').value = currentToolRoute;

            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.classList.add('modal-open'); // To prevent scrolling behind the modal
        }

        // Function to close the modal
        function closeModal() {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            messageBox.classList.add('hidden');
            document.body.classList.remove('modal-open'); // Re-enable scrolling
        }

        // Handle file selection
        fileUpload.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                const file = e.target.files[0];
                fileNameDisplay.textContent = file.name;
                fileStatus.classList.remove('hidden');
                messageBox.classList.add('hidden');
            } else {
                fileStatus.classList.add('hidden');
            }
        });

        // Handle form submission
        uploadForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            if (fileUpload.files.length === 0) {
                showMessage('‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡§®‡§µ‡§∞‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§´‡§º‡§æ‡§á‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§', 'error');
                return;
            }

            // Set loading state
            progressArea.classList.remove('hidden');
            messageBox.classList.add('hidden');
            convertButton.disabled = true;
            convertButton.textContent = '‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';
            convertButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700', 'shadow-lg');
            convertButton.classList.add('bg-gray-400', 'cursor-not-allowed', 'shadow-none');

            const formData = new FormData();
            formData.append('file', fileUpload.files[0]);
            
            const route = document.getElementById('conversion-route').value;

            try {
                // Ensure the route is pointing to the correct Flask endpoint
                const response = await fetch(route, {
                    method: 'POST',
                    body: formData
                });

                // Check for file download or error message
                if (response.ok && response.headers.get('Content-Type') && response.headers.get('Content-Type').includes('application')) {
                    // Successful file download
                    const blob = await response.blob();
                    
                    // Try to get filename from Content-Disposition header
                    let downloadName = 'converted_file';
                    const disposition = response.headers.get('Content-Disposition');
                    if (disposition && disposition.indexOf('attachment') !== -1) {
                        const filenameRegex = /filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/;
                        const matches = filenameRegex.exec(disposition);
                        if (matches != null && matches[1]) {
                            downloadName = matches[1].replace(/['"]/g, '');
                        }
                    } else if (route === '/pdf-to-word') {
                        downloadName = fileUpload.files[0].name.replace('.pdf', '.docx');
                    } else if (route === '/word-to-pdf') {
                         downloadName = fileUpload.files[0].name.replace(/(\.docx|\.doc)$/i, '.pdf');
                    }

                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.style.display = 'none';
                    a.href = url;
                    a.download = downloadName;
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);

                    showMessage('‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ú‡§º‡§® ‡§∏‡§´‡§≤! ‡§Ü‡§™‡§ï‡•Ä ‡§´‡§º‡§æ‡§á‡§≤ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡•§', 'success');
                } else {
                    // Handle API or server error response (likely a 500 or 400 with text)
                    const errorText = await response.text();
                    showMessage(`‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ú‡§º‡§® ‡§è‡§∞‡§∞: ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï $\text{‡§Ø‡§æ}$ API $\text{‡§è‡§∞‡§∞}$: ${errorText || '‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§è‡§∞‡§∞'}`, 'error');
                }

            } catch (error) {
                console.error("Fetch Error:", error);
                showMessage(`‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§è‡§∞‡§∞: ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§§‡§ï ‡§™‡§π‡•Å‡§Å‡§ö‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤‡•§`, 'error');
            } finally {
                // Reset loading state
                progressArea.classList.add('hidden');
                // We keep the message visible until the user closes the modal
                convertButton.disabled = false;
                convertButton.textContent = '‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç';
                convertButton.classList.remove('bg-gray-400', 'cursor-not-allowed', 'shadow-none');
                convertButton.classList.add('bg-indigo-600', 'hover:bg-indigo-700', 'shadow-lg');
            }
        });

        // Helper function for messages
        function showMessage(message, type) {
            messageBox.textContent = message;
            messageBox.classList.remove('hidden', 'bg-red-100', 'text-red-700', 'bg-green-100', 'text-green-700', 'bg-red-50', 'text-red-800');
            
            if (type === 'error') {
                messageBox.classList.add('bg-red-50', 'text-red-800', 'border', 'border-red-300');
            } else if (type === 'success') {
                messageBox.classList.add('bg-green-100', 'text-green-700', 'border', 'border-green-300');
            }
        }
    </script>
</body>
</html>
